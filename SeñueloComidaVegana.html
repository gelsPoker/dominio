<!DOCTYPE html>
<html lang="en">
<head>
  <title>Comida Vegana Para Llevar</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-sm navbar-dark bg-success">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">VeggiGo</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="collapsibleNavbar">
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Empresa</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#m2">Quienes Somos</a></li>
                            <li><a class="dropdown-item" href="#">Mision</a></li>
                            <li><a class="dropdown-item" href="#">Vision</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="productos.html">Menu</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Nosotros</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#m1">Contacto</a>
                    </li>  
                </ul>
                    <a href="CarritoCompras.html"
                        class="btn btn-outline-light position-relative ms-3" id="cartButton">
                        üõí
                        <span id="cartCountBadge"
                            class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">0
                        </span>
                    </a>
                <form class="d-flex ms-auto">
                    <input class="form-control me-2" type="text" placeholder="Search">
                    <button class="btn btn-primary" type="button">Buscar</button>
                </form>
            </div>
        </div>
    </nav>

    <!-- Contenido GridSystem -->
    <!-- Carousel --> 
    <div class="container-fluid">
        <div id="demo" class="carousel slide" data-bs-ride="carousel">

            <!-- Indicators/dots -->
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#demo" data-bs-slide-to="0" class="active"></button>
                <button type="button" data-bs-target="#demo" data-bs-slide-to="1"></button>
                <button type="button" data-bs-target="#demo" data-bs-slide-to="2"></button>
            </div>

            <!-- The slideshow/carousel -->
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="img/comidaVegana2.jpeg" alt="Los Angeles" class="d-block w-100">
                    <!--centrado -->
                    <div class="position-absolute top-50 start-50 translate-middle text-center w-100 px-3">
                        <span class="d-inline-block bg-dark bg-opacity-50 text-white px-4 py-2 rounded-3 fs-3 fw-semibold">
                            "Mi plato, mi elecci√≥n, mi amabilidad"
                        </span>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="img/comidaVegana7.jpg" alt="Chicago" class="d-block w-100">
                     <div class="position-absolute top-50 start-50 translate-middle text-center w-100 px-3">
                        <span class="d-inline-block bg-dark bg-opacity-50 text-white px-4 py-2 rounded-3 fs-3 fw-semibold">
                            "Cambiando el mundo, una comida a la vez"
                        </span>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="img/comidavegana8.jpg" alt="New York" class="d-block w-100">
                    <div class="position-absolute top-50 start-50 translate-middle text-center w-100 px-3">
                        <span class="d-inline-block bg-dark bg-opacity-50 text-white px-4 py-2 rounded-3 fs-3 fw-semibold">
                            ‚ÄúUn plato m√°s cerca de un ma√±ana mejor‚Äù
                        </span>
                    </div>
                </div>
            </div>

            <!-- Left and right controls/icons -->
            <button class="carousel-control-prev" type="button" data-bs-target="#demo" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#demo" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
            </button>
        </div>
    </div>

    <!-- Footer -->
    <div class="container-fluid">
        <div class="row">
            <div class="col-12 d-flex justify-content-center bg-primary text-white py-2">
                MiEmpresaComidaVegana@2025.com
            </div>
        </div>
    </div>

    <!-- Modal Contacto -->
    <div class="modal fade" id="m1">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h4 class="modal-title">Contactos</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">
                    <form action="/action_page.php">
                        <div class="mb-3 mt-3">
                            <label for="email" class="form-label">Email:</label>
                            <input type="email" class="form-control" id="email" placeholder="Enter email" name="email">
                        </div>
                        <div class="form-group mb-3">
                            <label for="exampleFormControlTextarea1">Mensaje</label>
                            <textarea class="form-control" id="exampleFormControlTextarea1" rows="4"></textarea>
                        </div>
                        <button type="button" class="btn btn-primary">Enviar</button>
                    </form>
                </div>

                <div class="modal-footer"></div>
            </div>
        </div>
    </div>

    <!-- Modal Quienes Somos -->
    <div class="modal fade" id="m2">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Quienes Somos</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    Modal body..
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <script>
/** Carrito simple con localStorage, reutilizable entre p√°ginas */
(function () {
  const CART_KEY = 'veggigo_cart_v1';

  const $badge = document.getElementById('cartCountBadge');

  function currency(n) {
    try {
      return new Intl.NumberFormat('es-CL', { style:'currency', currency:'CLP', maximumFractionDigits:0 }).format(n);
    } catch { return '$' + n; }
  }

  function getCart() {
    return JSON.parse(localStorage.getItem(CART_KEY) || '[]');
  }
  function saveCart(cart) {
    localStorage.setItem(CART_KEY, JSON.stringify(cart));
    updateBadge();
  }
  function updateBadge() {
    if (!$badge) return;
    const count = getCart().reduce((s, i) => s + i.qty, 0);
    $badge.textContent = count;
    $badge.style.display = count ? '' : 'none';
  }
  function addToCart(product, qty) {
    const cart = getCart();
    const i = cart.findIndex(p => p.id === product.id);
    if (i > -1) cart[i].qty += qty; else cart.push({ ...product, qty });
    saveCart(cart);
  }

  // Captura de clicks en botones [data-add-to-cart]
  document.addEventListener('click', (ev) => {
    const btn = ev.target.closest('[data-add-to-cart]');
    if (!btn) return;

    const rootSel = btn.getAttribute('data-product-root') || '#product';
    const qtySel  = btn.getAttribute('data-qty-input')   || '#qty';
    const redirect = (btn.getAttribute('data-redirect-to-cart') || 'true') === 'true';

    const root = document.querySelector(rootSel);
    const qtyEl = document.querySelector(qtySel);

    if (!root) return;
    const product = {
      id: root.dataset.id,
      name: root.dataset.name,
      price: Number(root.dataset.price || 0),
      image: root.dataset.image || ''
    };
    const qty = Math.max(1, parseInt(qtyEl ? qtyEl.value : (btn.getAttribute('data-qty') || '1'), 10) || 1);

    addToCart(product, qty);

    if (redirect) {
      window.location.href = 'CarritoCompras.html';
    } else {
      // Si no quieres redirigir, s√≥lo actualiza el badge
      updateBadge();
    }
  });

  // Exponer helpers m√≠nimos para la otra p√°gina (opcional)
  window.VeggiGoCart = { getCart, saveCart, currency, updateBadge };

  // Render inicial del badge
  updateBadge();
})();
</script>

</body>
</html>